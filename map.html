<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🔥 Luciérnaga Exorcista: Violent Hell 🔥</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.js"></script>
    <style>
        body { margin: 0; background: black; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>
<script>
const config = {
    type: Phaser.AUTO,
    width: window.innerWidth,
    height: window.innerHeight,
    physics: { default: "arcade" },
    scene: { preload, create, update }
};

let luciernaga, joystick, fireballs, letras, dedos;

const CHINESE_LETTERS = ["撒但", "魔鬼", "邪恶", "诱惑", "黑暗", "龙", "幻影", "影子", "幽灵", "恶魔", "燃烧"];
const VOLUME = 0.5;  // Ajusta el volumen del horror

let game = new Phaser.Game(config);

function preload() {
    this.load.image("luciernaga", "https://i.imgur.com/F9Z5QYD.png");
    this.load.image("fireball", "https://i.imgur.com/YvCzg1M.png");
    this.load.image("dedo", "https://i.imgur.com/XFxmQZs.png");
    this.load.audio("fire", "https://freesound.org/data/previews/491/491393_10226524-lq.mp3");
    this.load.audio("scream", "https://freesound.org/data/previews/276/276593_5121236-lq.mp3");
}

function create() {
    this.sound.volume = VOLUME;

    luciernaga = this.physics.add.sprite(window.innerWidth / 2, window.innerHeight - 100, "luciernaga").setScale(0.2);
    luciernaga.setCollideWorldBounds(true);

    fireballs = this.physics.add.group();
    letras = this.physics.add.group();
    dedos = this.physics.add.group();

    // Crear joystick virtual
    joystick = this.input.keyboard.createCursorKeys();

    // Crear letras chinas flotantes
    for (let i = 0; i < 10; i++) {
        let x = Phaser.Math.Between(50, window.innerWidth - 50);
        let y = Phaser.Math.Between(50, window.innerHeight - 300);
        let letra = this.add.text(x, y, Phaser.Utils.Array.GetRandom(CHINESE_LETTERS), {
            font: "40px Arial",
            fill: "#ff0000",
            backgroundColor: "#lime"
        }).setOrigin(0.5);

        this.physics.add.existing(letra);
        letras.add(letra);

        letra.body.setVelocity(Phaser.Math.Between(-100, 100), Phaser.Math.Between(-100, 100)).setBounce(1).setCollideWorldBounds(true);
    }

    // Generar dedos demoníacos que intentan tocar las letras
    this.time.addEvent({
        delay: 2000,
        loop: true,
        callback: () => {
            let x = Phaser.Math.Between(50, window.innerWidth - 50);
            let dedo = this.physics.add.sprite(x, 0, "dedo").setScale(0.1);
            dedos.add(dedo);
            dedo.setVelocity(0, 150);

            this.physics.add.overlap(dedo, letras, (dedo, letra) => {
                this.sound.play("scream");
                this.cameras.main.shake(500);
                letra.setText("🔥" + letra.text + "🔥");
                dedo.destroy();
            });
        }
    });

    // Disparar bolas de fuego
    this.input.keyboard.on("keydown-SPACE", () => {
        let fireball = fireballs.create(luciernaga.x, luciernaga.y, "fireball").setScale(0.05);
        fireball.setVelocity(0, -300);
        this.sound.play("fire");

        this.physics.add.overlap(fireball, letras, (fireball, letra) => {
            this.cameras.main.flash(300);
            letra.destroy();
            fireball.destroy();
        });
    });
}

function update() {
    if (joystick.left.isDown) { luciernaga.setVelocityX(-200); }
    else if (joystick.right.isDown) { luciernaga.setVelocityX(200); }
    else { luciernaga.setVelocityX(0); }

    if (joystick.up.isDown) { luciernaga.setVelocityY(-200); }
    else if (joystick.down.isDown) { luciernaga.setVelocityY(200); }
    else { luciernaga.setVelocityY(0); }
}
</script>
</body>
</html>
